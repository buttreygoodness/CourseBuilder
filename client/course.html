<template name="course">
  <div class="container">
    {{#if showCreateSectionDialog}}
      {{> createSectionDialog}}
    {{/if}}
    {{#if showCreateChapterDialog}}
      {{> createChapterDialog}}
    {{/if}}
    {{#if course}}
    {{#with course}}
    <div class="row">
      <div class="span12">
        <h1>{{title}} <small>{{_id}}</small>  {{> courseControls}}</h1>
      </div>
    </div>
    <div class="row">
      <div class="span3">
        <ul>
          {{#if anyChapters}}
          {{#each chapters}}
            <li>{{title}}</li>
          {{/each}}
          {{/if}}
        </ul>
      </div>
      <div class="span9">
        {{#if anySections}}
          {{#each sections}}
          <h3>{{title}} <small>{{_id}}</small></h3>
          {{/each}}
        {{/if}}
        {{#if anyChapters}}
        {{#each chapters}}
          <h2 class="chapter {{_id}} {{#if selectedChapter}}selected{{/if}}">{{title}} {{#if selectedChapter}}<small>{{_id}}</small> {{> chapterControls}}{{/if}}</h2>
          {{#if anySections}}
            {{#each sections}}
            <h3>{{title}} <small>{{_id}}</small></h3>
            {{/each}}
          {{/if}}
        {{/each}}
        {{else}}
        <div class="well">
          Get started by adding some chapters.
        </div>
        {{/if}}
      </div>
    </div>
    {{/with}}
    {{/if}}
  </div>
</template>

<template name="courseControls">

  <a href="#" class="btn btn-small createChapter">Add Chapter</a>
  <a href="#" class="btn btn-small createSection">Add Section</a>
  <a href="#" class="btn btn-small">Add Block</a>

</template>

<template name="chapterControls">
  <a href="#" class="btn btn-small createSection">Add Section</a>
</template>

<!-- createChapterDialog template -->

<template name="createChapterDialog">
  <div class="mask"> </div>
  <div class="modal">
    <div class="modal-header">
      <button type="button" class="close cancel">&times;</button>
      <h3>Add Chapter</h3>
    </div>

    <div class="modal-body">
      {{#if error}}
        <div class="alert alert-error">{{error}}</div>
      {{/if}}

      <label>Title</label>
      <input type="text" class="title span5">

    </div>

    <div class="modal-footer">
      <a href="#" class="btn cancel">Cancel</a>
      <a href="#" class="btn btn-primary save">Add Chapter</a>
    </div>
  </div>
</template>

<!-- createSectionDialog template -->

<template name="createSectionDialog">
  <div class="mask"> </div>
  <div class="modal">
    <div class="modal-header">
      <button type="button" class="close cancel">&times;</button>
      <h3>Add Section</h3>
    </div>

    <div class="modal-body">
      {{#if error}}
        <div class="alert alert-error">{{error}}</div>
      {{/if}}

      <label>Title</label>
      <input type="text" class="title span5">

    </div>

    <div class="modal-footer">
      <a href="#" class="btn cancel">Cancel</a>
      <a href="#" class="btn btn-primary save">Add Section</a>
    </div>
  </div>
</template>